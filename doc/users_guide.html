<html>
<head>
<title>Yadex user's guide</title>
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css">
  DT {
    margin-bottom:       1em;
    margin-top:          1em;
    display:             list-item;
    list-style-image:    none;
    list-style-position: inside;
    list-style-type:     disc;
  }
  DD {
    margin-bottom: 1em;
    margin-top:    1em
  }
</style>
</head>
<body>

<div align="center">
  <img src="logo_small.png" alt="Fancy logo">
  <br>Yadex 1.7.1 (2008-09-01)
  <h1>User's guide</h1>
  <table>
    <tr>
      <td>
      </td>
      <td width="50%" align="center">
	<strong>
	  Warning : this document is unfinished, ill-structured and
	  incomplete.
	</strong>
      </td>
      <td>
      </td>
    </tr>
  </table>
</div>
<br>
<br>
<br>

<p>Contents :

<p>
<!-- generated by htmltoc { -->
  <ul>
    <li><a href="#toc-1">1. Introduction</a></li>
    <ul>
      <li><a href="#toc-1-1">1.1. Yadex in one paragraph</a></li>
      <li><a href="#toc-1-2">1.2. What do I need ?</a></li>
      <ul>
        <li><a href="#toc-1-2-1">1.2.1. Iwad</a></li>
        <li><a href="#toc-1-2-2">1.2.2. Directories</a></li>
        <li><a href="#toc-1-2-3">1.2.3. Display</a></li>
      </ul>
      <li><a href="#toc-1-3">1.3. Compiling and installing Yadex</a></li>
    </ul>
    <li><a href="#toc-2">2. Running Yadex</a></li>
    <ul>
      <li><a href="#toc-2-1">2.1. The command line arguments</a></li>
      <li><a href="#opt">2.2. Options</a></li>
      <li><a href="#game">2.3. Specifying the game for which
		you want to edit</a></li>
      <li><a href="#pwads">2.4. Specifying the names of
		pwads to load</a></li>
      <li><a href="#env">2.5. Environment variables</a></li>
    </ul>
    <li><a href="#toc-3">3. Editing levels with Yadex</a></li>
    <ul>
      <li><a href="#toc-3-1">3.1. Using external textures, flats, etc.</a></li>
      <li><a href="#toc-3-2">3.2. Logging of time spent</a></li>
      <li><a href="#toc-3-3">3.3. The prompt commands</a></li>
      <li><a href="#toc-3-4">3.4. Moving around</a></li>
      <ul>
        <li><a href="#toc-3-4-1">3.4.1. Moving the pointer</a></li>
        <li><a href="#toc-3-4-2">3.4.2. Scrolling</a></li>
        <li><a href="#toc-3-4-3">3.4.3. Autoscrolling</a></li>
        <li><a href="#toc-3-4-4">3.4.4. Jumping</a></li>
      </ul>
      <li><a href="#toc-3-5">3.5. Zooming in and out</a></li>
      <li><a href="#toc-3-6">3.6. The grid</a></li>
      <li><a href="#toc-3-7">3.7. Inserting objects</a></li>
      <li><a href="#toc-3-8">3.8. Copying objects</a></li>
      <li><a href="#toc-3-9">3.9. Deleting objects</a></li>
      <li><a href="#toc-3-10">3.10. Changing the properties of objects</a></li>
      <li><a href="#toc-3-11">3.11. Moving objects a.k.a. drag-and-drop</a></li>
      <li><a href="#toc-3-12">3.12. Renumbering objects</a></li>
      <ul>
        <li><a href="#toc-3-12-1">3.12.1. Exchanging objects numbers</a></li>
      </ul>
      <li><a href="#toc-3-13">3.13. Selecting objects</a></li>
      <li><a href="#toc-3-14">3.14. The use of [<kbd>Shift</kbd>]</a></li>
      <li><a href="#toc-3-15">3.15. Sector miscellaneous operations</a></li>
      <li><a href="#toc-3-16">3.16. Thing miscellaneous operations</a></li>
      <li><a href="#toc-3-17">3.17. Setting/toggling/clearing thing flags</a></li>
      <li><a href="#toc-3-18">3.18. Vertex miscellaneous operations</a></li>
      <li><a href="#toc-3-19">3.19. Linedef miscellaneous operations</a></li>
      <li><a href="#toc-3-20">3.20. Setting/toggling/clearing linedef flags</a></li>
      <li><a href="#toc-3-21">3.21. Undoing</a></li>
      <li><a href="#toc-3-22">3.22. Cut-and-paste from one level to another</a></li>
      <li><a href="#toc-3-23">3.23. Using the flat/patch/sprite/texture viewer</a></li>
      <li><a href="#toc-3-24">3.24. Saving</a></li>
      <li><a href="#toc-3-25">3.25. Closing a window</a></li>
    </ul>
    <li><a href="#toc-4">4. Variables and configuration</a></li>
    <ul>
      <li><a href="#toc-4-1">4.1. Variables</a></li>
      <ul>
        <li><a href="#toc-4-1-1">4.1.1. The font</a></li>
        <li><a href="#toc-4-1-2">4.1.2. Mouse wheel and other mouse issues</a></li>
      </ul>
      <li><a href="#toc-4-2">4.2. Preferences</a></li>
      <li><a href="#toc-4-3">4.3. Command line</a></li>
      <li><a href="#toc-4-4">4.4. Environment variables</a></li>
      <li><a href="#toc-4-5">4.5. Configuration files</a></li>
      <ul>
        <li><a href="#toc-4-5-1">4.5.1. Contents of configuration files</a></li>
        <li><a href="#config_locate">4.5.2. Locating
			configuration files</a></li>
        <li><a href="#toc-4-5-3">4.5.3. Default configuration files</a></li>
        <li><a href="#toc-4-5-4">4.5.4. User-specified configuration files</a></li>
        <li><a href="#toc-4-5-5">4.5.5. Organising your configuration files</a></li>
      </ul>
    </ul>
    <li><a href="#toc-5">5. Game definition files</a></li>
    <ul>
      <li><a href="#toc-5-1">5.1. Contents of game definition files</a></li>
      <li><a href="#ygd_locate">5.2. Locating game definition
		files</a></li>
      <li><a href="#toc-5-3">5.3. Use of game definition files</a></li>
    </ul>
    <li><a href="#toc-6">6. Known bugs</a></li>
    <li><a href="#games">7. Supported games</a></li>
    <ul>
      <li><a href="#toc-7-1">7.1. Doom</a></li>
      <li><a href="#toc-7-2">7.2. Doom II</a></li>
      <li><a href="#toc-7-3">7.3. Doom alpha</a></li>
      <li><a href="#toc-7-4">7.4. Doom press release pre-beta</a></li>
      <li><a href="#toc-7-5">7.5. Final Doom</a></li>
      <li><a href="#toc-7-6">7.6. Heretic</a></li>
      <li><a href="#toc-7-7">7.7. Hexen</a></li>
      <li><a href="#toc-7-8">7.8. Strife</a></li>
      <li><a href="#toc-7-9">7.9. Ultimate Doom</a></li>
      <li><a href="#toc-7-10">7.10. Boom</a></li>
      <li><a href="#toc-7-11">7.11. EDGE</a></li>
      <li><a href="#toc-7-12">7.12. MBF</a></li>
      <li><a href="#toc-7-13">7.13. Other derivatives</a></li>
    </ul>
  </ul>
<!-- } generated by htmltoc -->
</p>

	<hr noshade>
	<h2><a name="toc-1">1. Introduction</a></h2>

		<h3><a name="toc-1-1">1.1. Yadex in one paragraph</a></h3>

<p>Yadex is a Doom level (wad) editor for Unix systems running
X, including Linux. It supports Doom, Doom II, Ultimate Doom,
Final Doom, Heretic, Doom press release pre-beta and also, in a
more or less limited way, Hexen, Strife and Doom alpha. It is
available under the terms of the GPL.

		<h3><a name="toc-1-2">1.2. What do I need ?</a></h3>

<p>To compile, install and run this release of Yadex, you need

<ul>
  <li>a POSIX-compatible environment (such as Unix),
  <li>a C compiler (ISO-compatible),
  <li>a C++ compiler (ISO-compatible),
  <li>GNU make (it won't work with other flavours of make),
  <li>an HTML viewer to read the doc,
  <li>a Doom/Doom II/Heretic/Hexen/Strife iwad,
  <li>X11R6 or X11R5.
</ul>

<p>More specifically, Yadex expects that

<ul>
  <li>the routines in <code>ctype.h</code> accept the range
    <code>CHAR_MIN</code> through <code>UCHAR_MAX</code>,

  <li>the C library supports <code>hypot()</code> and at least
    one of <code>nanosleep()</code> and <code>usleep()</code>.
</ul>

		<h4><a name="toc-1-2-1">1.2.1. Iwad</a></h4>

<p>A shareware Doom or Heretic iwad or a demo Hexen or Strife
iwad is okay but you need a registered iwad if you want to be
able to save your changes.

		<h4><a name="toc-1-2-2">1.2.2. Directories</a></h4>

<p>Yadex mostly conforms to the <a
href="http://www.pathname.com/fhs/"> FHS (filesystem hierarchy
standard)</a>. By default, the installation procedure will try
to copy files in the following directories, creating the
directories if they don't exist&nbsp;;

<ul>
<li><code>/usr/local/bin</code>
<li><code>/etc/yadex/1.7.1</code>
<li><code>/usr/local/man/man6</code>
<li><code>/usr/local/share/games/yadex/1.7.1</code>
</ul>

<p>So make sure you have the necessary rights before installing.
If you don't, install in a different directory by running
<code>./configure</code> with the <code>--prefix</code> option.

		<h4><a name="toc-1-2-3">1.2.3. Display</a></h4>

<p>Yadex uses about 270 different colours. In most cases, on
PseudoColor displays, there aren't that many free colour cells.
So, if it detects a PseudoColor display, Yadex uses a private
colormap so as to get as many free colour cells as possible.
The drawback of this method is that, when you're in the Yadex
window, all other windows are displayed with wrong colours and
vice-versa.

<p>What's more, as PseudoColor displays typically have 256
colours (at least on PC), which is less than the number of
colours needed, Yadex might have to assign the same physical
colour to different logical colours. If it happens, it will try
to render the colours of the game accurately at the expense of
the application colours.

<p>Executive summary: if you can, use a TrueColor or DirectColor
display and a depth of more than 8 bits per pixel (E.G. by
launching X with "<code>startx -- -bpp 16</code>").

<p>A 640x480 screen is okay though, of course, a larger display
is better.

	<h3><a name="toc-1-3">1.3. Compiling and installing Yadex</a></h3>

See <a href="README"><code>README</code></a>.

<p>Don't forget to tell Yadex where your iwads are by changing
the lines "<code>iwad1&nbsp;=</code>",
"<code>iwad2&nbsp;=</code>" etc. in
<code>/etc/yadex/1.7.1/yadex.cfg</code>.
If there is an iwad you don't have, you can just comment out the
corresponding line.

	<hr noshade>
	<h2><a name="toc-2">2. Running Yadex</a></h2>

		<h3><a name="toc-2-1">2.1. The command line arguments</a></h3>

<p>Yadex takes two sorts of command line arguments&nbsp;:
parameters and options. An option is a command line argument
that starts with a "<code>-</code>".

<p>Some options take an argument. The argument must be
separated from the option by some whitespace.
<strong>Constructs like "<code>-othingy</code>" are not
recognized. You have to type "<code>-o thingy</code>".</strong>

<p>The "<code>-file</code>" option takes a variable number of
arguments. It uses all the non-options up to the next option.

<p>The options that take no argument can be negated by using a
"<code>+</code>" instead of a "<code>-</code>". For example,
"<code>+sb</code>" will undo the effect of a
"<code>swap_buttons&nbsp;=&nbsp;true</code>" directive in the
config file.

<p>In general, if you specify the same option more than once,
the last occurrence overrides the previous ones. For example,
"<code>yadex&nbsp;+P&nbsp;-P</code>" is equivalent to
"<code>yadex&nbsp;-P</code>". Similarly,
"<code>yadex&nbsp;-i1&nbsp;foo.wad&nbsp;-i1&nbsp;bar.wad&nbsp;-i1&nbsp;baz.wad</code>"
boils down to "<code>yadex&nbsp;-i1&nbsp;baz.wad</code>".

<p>The "<code>-pwad</code>" (or "<code>-pw</code>") option,
however are additive. Each occurrence will add to the previous
ones. For instance,
"<code>yadex&nbsp;-pwad&nbsp;foo.wad&nbsp;-pwad&nbsp;bar.wad</code>"
is equivalent to "<code>yadex&nbsp;foo.wad&nbsp;bar.wad</code>".

<p>Any command line argument that is not an option is treated as
the name of a pwad to load. You can put as many names of pwads
on the command line as you wish (or none at all). The details
of specifying pwad names are discussed <a
href="#pwads">there</a>.

		<h3>2.2. <a name="opt">Options</a></h3>

<p>To know about the command line options that Yadex
understands, type

<p><code>$ yadex --help</code>

<p>You'll get this:

<pre>
-b                 <var>string</var>     Run benchmark and exit successfully
-f  -config_file   <var>string</var>     Config file
-d  -debug                    Debug mode
    -expert                   Expert mode
-fc -fake_cursor              Fake cursor
-fn -font          <var>string</var>     Font name
-g  -game          <var>string</var>     Game
-h  -height        <var>integer</var>    Initial window height
-?  -help  --help             Show usage summary
-i1 -iwad1         <var>string</var>     The name of Doom iwad
-i2 -iwad2         <var>string</var>     The name of the Doom II iwad
-i3 -iwad3         <var>string</var>     The name of the Heretic iwad
-i4 -iwad4         <var>string</var>     The name of the Hexen iwad
-i5 -iwad5         <var>string</var>     The name of the Strife iwad
-i6 -iwad6         <var>string</var>     The name of the Doom alpha 0.2 iwad
-i7 -iwad7         <var>string</var>     The name of the Doom alpha 0.4 iwad
-i8 -iwad8         <var>string</var>     The name of the Doom alpha 0.5 iwad
-i9 -iwad9         <var>string</var>     The name of the Doom press release iwad
-i10 -iwad10       <var>string</var>     The name of the Strife 1.0 iwad
-pw -pwad          <var>string</var>     Pwad file to load
-P  -no_pixmap                No pixmap, saves memory, more flicker
-q  -quiet                    Quiet mode
-qq -quieter                  Quieter mode
-s0 -select0                  Automatic selection of 0th object
-sb -swap_buttons             Swap mouse buttons
-td -text_dot                 DrawScreenText debug flag
-v  -verbose                  Verbose mode
    --version                 Print version and exit
-w  -width         <var>integer</var>    Initial window width
-z  -zoom          <var>integer</var>    Initial zoom factor
</pre>

<p>You might wonder what the "<code>-file</code>",
"<code>-pw</code>" and "<code>-pwad</code>" options are for
since it's so simple to just put the names of the pwads on the
command line. The answer is that they're only here for
compatibility with previous versions of Yadex/Yade/DEU. Don't
use them. They might go away one day.

		<h3>2.3. <a name="game">Specifying the game for which
		you want to edit</a></h3>

<p>Yadex can handle several games (Doom, Doom II, Heretic, etc.)
but only one at a time. Unfortunately, that game can't be
changed dynamically. If you want to switch game, you must quit
Yadex and run it again.

<p>By default, the game used is the one specified by the
"<code>game=</code>" directive in the configuration file. If
you want to override the default, use "<code>-g
<var>game</var></code>".

<p>The allowed values for <code><var>game</var></code> are&nbsp;:
<dl>
  <dt>"<code>doom</code>"
  <dd>Doom and Ultimate Doom (shareware or registered)

  <dt>"<code>doom02</code>"
  <dd>Doom alpha 0.2

  <dt>"<code>doom04</code>"
  <dd>Doom alpha 0.4

  <dt>"<code>doom05</code>"
  <dd>Doom alpha 0.5

  <dt>"<code>doom2</code>"
  <dd>Doom II and Final Doom

  <dt>"<code>doompr</code>"
  <dd>Doom press release pre-beta

  <dt>"<code>heretic</code>"
  <dd>Heretic (shareware or registered)

  <dt>"<code>hexen</code>"
  <dd>Hexen (demo or commercial)

  <dt>"<code>strife</code>"
  <dd>Strife 1.1 or later (demo or commercial)

  <dt>"<code>strife10</code>"
  <dd>Strife 1.0 (demo or commercial)
</dl>

<p>Not all those games are fully supported. For details, see <a
href="#games">there</a>.


		<h3>2.4. <a name="pwads">Specifying the names of
		pwads to load</a></h3>

<p>When you have to specify the name of a pwad to load, for
example in the <code>r</code> command, or as a command line
argument, you don't always have to spell it all out.

<ul>
  <li>The <code>.wad</code> extension can be omitted, it will
    be added automatically.  For example, specifying the name
    "<code>foo</code>" is equivalent to specifying
    "<code>foo.wad</code>".  An unfortunate consequence of this
    convention is that it's impossible to load a wad that would
    be really called "<code>foo</code>".  Though, under DOS, you
    can still work around this limitation by specifying the name
    with a trailing dot, ("<code>foo.</code>").

  <li>
    <p>
      The path can sometimes be omitted too, if the wad is in
      one of the <dfn>standard directories</dfn>, or one of
      their subdirectories.  If no file of the name you
      specified is found in the current directory, Yadex will
      look for a file of that name in the standard directories,
      which are&nbsp;:
    </p>

    <ol>
      <li>your home directory,
      <li><code>/usr/local/share/games/</code><var>game</var>,
      <li><code>/usr/share/games/</code><var>game</var>,
      <li><code>/usr/local/share/games/wads</code>,
      <li><code>/usr/share/games/wads</code>,
    </ol>

    <p>(where <var>game</var> is the name of the <a
    href="#game">game</a>).</p>

    <p>On the other hand, if you give an absolute file name,
    that is one that begins with a "<code>/</code>", the
    standard directories will <em>not</em> be used. Yadex will
    only try to open the file of the exact name you specified.

    <p>For example, if you type "<code>yadex -g doom2
    foo/bar</code>", Yadex will look for the following files in
    order&nbsp;:</p>

    <ol>
      <li><code>~/foo/bar.wad</code>,
      <li><code>/usr/local/share/games/doom2/foo/bar.wad</code>,
      <li><code>/usr/share/games/doom2/foo/bar.wad</code>,
      <li><code>/usr/local/share/games/wads/foo/bar.wad</code>,
      <li><code>/usr/share/games/wads/foo/bar.wad</code>,
    </ol>

    <p>and open the first it finds.</p>

    <p>But if you type
    "<code>yadex&nbsp;-g&nbsp;doom2&nbsp;/foo/bar</code>" (note
    the leading slash), Yadex will try to open
    "<code>/foo/bar.wad</code>", period.

    <p>The philosophy behind those standard directories is
    that&nbsp;:

    <ul>
      <li>a local file overrides a global one,
      <li>a game-specific file overrides a non-game-specific one.
    </ul>
</ul>

<p>Gotcha: those shorthands can only be used when
<em>reading</em> a pwad. When <em>writing</em> to a pwad, you
always have to specify the exact name, with the full path and
extension.

		<h3>2.5. <a name="env">Environment variables</a></h3>

<dl>
  <dt><code>DOOMWADDIR</code>
  <dd>No, <code>DOOMWADDIR</code> is <em>not</em> supported.
    Perhaps in another version...

  <dt><code>DISPLAY</code>
  <dd>Unix only. The name of the X display that Yadex will try
    to connect to.

  <dt><code>HOME</code>
  <dd>Used to expand <code>~</code> when locating configuration
    and game definition files.

  <dt><code>LINES</code>
  <dd>If set, Yadex assumes the tty has that many lines instead
    of 24. The value must be an unsigned, non-zero decimal
    integer.

  <dt><code>TMPDIR</code>
  <dd>If set, swap files are created there. Otherwise, in
    <code>/tmp</code>.

  <dt><code>YADEX_GAME</code>
  <dd>Indicates the game to use. Overrides the <code>game</code>
    parameter in the config file, is overridden by the
    <code>-g</code> command line option.
</dl>

	<hr noshade>
	<h2><a name="toc-3">3. Editing levels with Yadex</a></h2>

		<h3><a name="toc-3-1">3.1. Using external textures, flats, etc.</a></h3>

<p>Like Doom, Yadex accepts the addition and replacement of
resources from a pwad. In general, if the same resource is
defined in several wads, the last definition is used. This is
also true if the same resource is defined several times in the
same wad. It's not recommended that you use lower case names in
your wads; sometimes it's handled but sometimes it's not. So
always use upper-case names.</p>

<dl>
  <dt>Flats
  <dd>New or replacement flats are recognized iff they're placed
    between <code>FF_START</code>/<code>F_END</code> or
    <code>FF_START</code>/<code>FF_END</code> labels. There can
    be any number of <code>FF_START</code>/<code>F_END</code>
    and <code>FF_START</code>/<code>FF_END</code> pairs and they
    don't have to be in the same pwad. If there are several
    lumps for the same flat, the last one is used.

  <dt>Palette
  <dd>If there is a replacement <code>PLAYPAL</code> lump, it's
    used. If there are several <code>PLAYPAL</code> lumps, the
    last one is used.

  <dt>Patches
  <dd>New or replacement patches are recognized iff they're
    between <code>P_START</code> and <code>P_END</code> or
    <code>PP_START</code> and <code>PP_END</code>. Within a
    group of patches, labels <code>P1_START</code>,
    <code>P1_END</code>, <code>P2_START</code>,
    <code>P2_END</code>, <code>P3_START</code> and
    <code>P3_END</code> are ignored&nbsp;; any other label
    elicits a warning. New patches must also appear in the
    <code>PNAMES</code> lump or the texture browser won't be
    able to use them. If there are several <code>PNAMES</code>
    lumps, the last one is used. If there are several lumps for
    the same flat, the last one is used.

  <dt>Sprites
  <dd>New or replacement sprites are recognized iff they're
    between one of the following pair of labels&nbsp;:
    <code>S_START</code>/<code>S_END</code>,
    <code>SS_START</code>/<code>S_END</code> or
    <code>SS_START</code>/<code>SS_END</code>. There can be any
    number of label pairs and they don't have to be in the same
    pwad. If there are several lumps for the same sprite, the
    last one is used.

  <dt>Textures
  <dd>New or replacement textures are recognized iff they're in
    a <code>TEXTURE1</code> or <code>TEXTURE2</code> lump. If
    the same texture happens to be defined in both
    <code>TEXTURE1</code> and <code>TEXTURE2</code> (which
    should not happen), only the definition in
    <code>TEXTURE1</code> is used. If there are several
    <code>TEXTURE1</code> lumps, the last one is used. If there
    are several <code>TEXTURE2</code> lumps, the last one is
    used. If it exists, <code>TEXTURE2</code> is always
    susceptible to be used, even for games where it's not
    supposed to exist, like Doom&nbsp;II.
</dl>

		<h3><a name="toc-3-2">3.2. Logging of time spent</a></h3>

<p>If you edit a level from a file and there exists a file in
the same directory with the same name but with the extension
<code>.yl</code>, that file will be used to keep track of the
time you spent editing that level. At the end of the editing
session, Yadex will append a line to the <code>.yl</code> file
with the name of the level and the number of minutes spent on
it.

<p> Note that if the <code>.yl</code> file does not already
exist, it is <em>not</em> created. This is to prevent the
creation of a large number of small useless files when browsing
through a collection of wads. Thus, if you want to enable
logging, you need to manually create the log file first with a
command such as "<code>touch <var>name</var>.yl</code>".

		<h3><a name="toc-3-3">3.3. The prompt commands</a></h3>

<p>You can get a summary of the prompt commands
by typing "<code>?</code>" at the Yadex prompt.

		<h3><a name="toc-3-4">3.4. Moving around</a></h3>

			<h4><a name="toc-3-4-1">3.4.1. Moving the pointer</a></h4>

<p>In the X11 version, the only way to do that is to
move the pointer device (i.e. the mouse).

			<h4><a name="toc-3-4-2">3.4.2. Scrolling</a></h4>

<p>The arrow keys [<kbd>Left</kbd>], [<kbd>Right</kbd>],
[<kbd>Up</kbd>] and [<kbd>Down</kbd>] scroll a little at a time,
by default 10% of the screen/window width or height. You can
change the exact amount by setting the variable
<code>scroll_less</code> in the configuration file.

<p>[<kbd>Page-up</kbd>], [<kbd>Page-down</kbd>],
[<kbd>Home</kbd>] and [<kbd>End</kbd>] scroll more at a time, by
default 90% of the screen/window width or height. You can change
the exact amount by setting the variable
<code>scroll_more</code> in the configuration file.

			<h4><a name="toc-3-4-3">3.4.3. Autoscrolling</a></h4>

<p>By default, autoscrolling is disabled. You can enable it by
setting <code>autoscroll</code> to <code>true</code> in the
configuration file.

<p>When it is enabled and the pointer is close to the edge of
the screen/window, the map scrolls automatically. The closer you
are to the edge, the faster it scrolls. Autoscrolling is always
disabled near the menu bar items so that the map does not scroll
when you're reaching for the menu.

<p>You can fine tune autoscrolling by changing the variables
<code>autoscroll_amp</code> and <code>autoscroll_edge</code>.

			<h4><a name="toc-3-4-4">3.4.4. Jumping</a></h4>

<p>I plan to develop a full set-mark/jump-to-mark system similar
to the one in <code>vi</code>, with
<code>m<var>mark-name</var></code>,
<code>'<var>mark-name</var></code> and
<code>`<var>mark-name</var></code>.

<p>For the moment, if you press [<kbd>'</kbd>], the map scrolls
so that its centre is at the centre of the screen/window.

<p>If you press [<kbd>`</kbd>], the map scrolls so that its
centre is at the centre of the screen/window and the zoom factor
is adjusted so that the whole map is visible and almost fills
the screen/window.

		<h3><a name="toc-3-5">3.5. Zooming in and out</a></h3>

<p>The current zoom factor is shown on the info bar, after the
word "<code>Scale:</code>". It is shown in pixels per map
units. The indication "<code>Scale: 50%</code>" means that one
pixel of the display corresponds to 2 map units.

<p>You can zoom in by pressing [<kbd>+</kbd>] or [<kbd>=</kbd>]
or the 4th mouse button or by moving the mouse wheel "up". See
the <code>zoom_default</code> and <code>zoom_step</code>
variables.

<p> You can zoom out by pressing [<kbd>-</kbd>] or
[<kbd>_</kbd>] or the 5th mouse button or by moving the mouse
wheel "down". See the <code>zoom_default</code> and
<code>zoom_step</code> variables.

<p> You can also set the zoom factor directly with the keys
[<kbd>1</kbd>] through [<kbd>9</kbd>] and [<kbd>0</kbd>].
[<kbd>1</kbd>] sets the zoom factor to a value that is
controlled by the <code>digit_zoom_base</code> variable (by
default, 100%). Each successive key down the keyboard sets the
zoom factor <code>digit_zoom_step</code> percents higher than
the previous one (by default, -29%).

		<h3><a name="toc-3-6">3.6. The grid</a></h3>

<p>The <dfn>grid</dfn> is a square mesh of blue dots and lines
in the background. It's here to help you aligning your objects
correctly with regard to Doom's metrics, which will save you a
lot of textures misalignments.

<p> When you insert or drag objects, they are <dfn><i>snapped to
grid</i></dfn>. That is, Yadex prevents you from placing them
off the grid. You can toggle the <code>snap_to_grid</code> flag
by pressing [<kbd>y</kbd>].

<p> The grid step is always a power of 2, E.G. 128, 64, 32, etc.
You can get a finer grid (dividing the grid step by 2) by
pressing [<kbd>g</kbd>]. Conversely, pressing [<kbd>G</kbd>]
multiplies the grid step by 2. If you press [<kbd>g</kbd>] when
the grid step is already at its minimum value, it will be set to
its maximum value. And conversely. The minimum and maximum
values are set in the configuration file with
<code>grid_min</code> and <code>grid_max</code>.

<p> When you change the zoom factor, Yadex automatically changes
the grid step to make it what it thinks is best for the new zoom
factor. If you want to lock the grid step to its current value,
press [<kbd>z</kbd>]. To unlock it, press that key again.

<p> You can hide the grid by pressing [<kbd>h</kbd>] (but this
doesn't disable <code>snap_to_grid</code>). Press that key
again to make the grid visible again.

<p>You can also use [<kbd>H</kbd>] to reset the grid step.

		<h3><a name="toc-3-7">3.7. Inserting objects</a></h3>

<p>By pressing [<kbd>Ins</kbd>], you insert a new object under
the pointer.

<p>The type of the new object is generally determined by the
current mode. That is, if you are in things mode, pressing
[<kbd>Ins</kbd>] will create a new thing. However, this is not
always true, particularly if some objects are already
selected&nbsp;:

<ul>
  <li>If you are in vertices mode and there are two or more
  vertices selected, pressing [<kbd>Ins</kbd>] will insert a
  linedef from the first vertex to the second, another one from
  the second to the third and so on. That is, a path of linedefs
  is created from the first to the last vertex. The path is not
  closed (but see [<kbd>Shift</kbd>][<kbd>Ins</kbd>] below).

  <li>If you are in linedefs mode and there are selected
  linedefs, pressing [<kbd>Ins</kbd>] will create a new sector
  and new sidedefs that point to it and assign them to the
  linedefs. For the linedefs that had no first sidedef (whether
  or not they already had a second sidedef), the new sidedef is
  attached as first sidedef. For the linedefs that had a first
  sidedef but no second sidedef, the new sidedef is attached as
  second sidedef.  If one or more of the selected linedefs
  already had two sidedefs, the operation fails. Bug: the side
  to which the new sidedef is attached is decided without taking
  into account the actual orientation of the linedef.
</ul>

<p>If an object of the same type is highlighted at the moment
you press [<kbd>Ins</kbd>], the properties of the new object are
copied from the highlighted object. In other words, the
highlighted object serves as a "model". Else the properties of
the new object are set to default values.</p>

<table>
  <tr valign=top>
    <th>Object type
    <th>Property
    <th>Value if there is a model
    <th>Value if there is no model

  <tr valign=top>
    <td rowspan=7>Linedef
    <td>Start vertex
    <td>Like the model
    <td>If there are two selected vertices, the first.
	    If not, you are prompted for a vertex number.

  <tr valign=top>
    <td>End vertex
    <td>Like the model
    <td>If there are two selected vertices, the second.
	    If not, you are prompted for a vertex number.

  <tr valign=top>
    <td>Flags
    <td>Like the model
    <td>Impassable

  <tr valign=top>
    <td>Type
    <td>Like the model
    <td>0 (normal)

  <tr valign=top>
    <td>Sector tag
    <td>Like the model
    <td>0 (none)

  <tr valign=top>
    <td>First sidedef
    <td>FFFFh (none)
    <td>FFFFh (none)

  <tr valign=top>
    <td>Second sidedef
    <td>FFFFh (none)
    <td>FFFFh (none)

  <tr valign=top>
    <td rowspan=4>Thing
    <td>Coordinates
    <td>Like the pointer
    <td>Like the pointer

  <tr valign=top>
    <td>Type
    <td>Like the model
    <td><a href="#param_default_thing"><code>default_thing</code></a>

  <tr valign=top>
    <td>Flags
    <td>Like the model
    <td>D12 D3 D45

  <tr valign=top>
    <td>Angle
    <td>Like the model
    <td>0 (east)

  <tr valign=top>
    <td rowspan=7>Sector
    <td>Floor height
    <td>Like the model
    <td><a href="#param_default_floor_height"><code>default_floor_height</code></a>

  <tr>
    <td>Ceiling height
    <td>Like the model
    <td><a href="#param_default_ceiling_height"><code>default_ceiling_height</code></a>

  <tr>
    <td>Floor texture
    <td>Like the model
    <td><a href="#param_default_floor_texture"><code>default_floor_texture</code></a>

  <tr>
    <td>Ceiling texture
    <td>Like the model
    <td><a href="#param_default_ceiling_texture"><code>default_ceiling_texture</code></a>

  <tr>
    <td>Light level
    <td>Like the model
    <td><a href="#param_default_light_level"><code>default_light_level</code></a>

  <tr>
    <td>Type
    <td>Like the model
    <td>0 (normal)

  <tr>
    <td>Tag
    <td>Like the model
    <td>0 (none)

  <tr valign=top>
    <td>Vertex
    <td>Coordinates
  </tr>
</table>

<p>In vertex mode, pressing [<kbd>Shift</kbd>][<kbd>Ins</kbd>]
is the same as pressing [<kbd>Ins</kbd>] except that the path is
closed (an additional linedef is created from the last to the
first vertex).

		<h3><a name="toc-3-8">3.8. Copying objects</a></h3>

<p>When you press [<kbd>o</kbd>], the selected or highlighted
object(s) is(are) copied. If only one object has been copied,
the new copy is spawned under the pointer. If several objects
have been copied, the new copies are spawned so that their
centre is under the pointer.

<p>The new copies are spawned selected and everything else is
unselected so that you can easily drag them where you want.

<p>All the properties of the new objects are copied from the
original objects with the notable exception of references. If
you are an OO programmer, think shallow copy vs. deep copy.
Otherwise, read on.

<p>When you copy linedefs, the start and end vertices are copied
too and the new linedefs reference the new vertices instead of
the old ones. The same thing goes for sidedefs, except if the
<code>copy_linedef_reuse_sidedefs</code> flag is true. In that
case, each new linedef uses the same sidedefs as its "model"
did. This is useful when you want to create many similar
structures, E.G. pillars that stand in the same sector. When all
the structures use the same sidedefs, you can change all
structures at once by editing only one of them. Another benefit
of sharing sidedefs is that it makes your wad file somewhat
leaner, since the sidedef, at 30 bytes, is the largest level
object.

<p>However, sharing sidedefs makes impossible to change one
structure independantly of the others. That's where the "unlink
sidedef" function enters. If you select one or more linedefs and
unlink their sidedefs, Yadex makes the necessary duplications so
that none of the sidedefs they use is also used by any other
linedef outside the selection. Thus you can edit your linedefs
freely. The "unlink sidedef" operation is described in detail
<a href="#unlink_sidedefs">there</a>.

<p>Similarly, when you copy sectors, the linedefs, sidedefs and
vertices are duplicated and the new sectors use the copies, not
the original ones. Note that the
<code>copy_linedef_reuse_sidedefs</code> has not effect when
copying sectors; the new linedefs always use new sidedefs, even
if that flag is set.

<p>What about copying things and vertices&nbsp;? Well, those
don't contain references to other objects, so there are no
special precautions to take when duplicating them. Except for
the position, the copy is exactly identical to the original.

		<h3><a name="toc-3-9">3.9. Deleting objects</a></h3>

To be written. There is already a concise description in the <a
href="getting_started.html">getting started</a> document.

<br>Basically, use [<kbd>Del</kbd>].

		<h3><a name="toc-3-10">3.10. Changing the properties of objects</a></h3>

To be written. There is already a concise description in the <a
href="getting_started.html">getting started</a> document.

<br>Executive summary: use [<kbd>Return</kbd>] and double-click.

		<h3><a name="toc-3-11">3.11. Moving objects a.k.a. drag-and-drop</a></h3>

To be written. There is already a concise description in the <a
href="getting_started.html">getting started</a> document.

		<h3><a name="toc-3-12">3.12. Renumbering objects</a></h3>

Normally, you don't have to worry very much about the actual
numbers of the linedefs, sectors, sidedefs, things and vertices
you manipulate. You just have to be careful to use the correct
numbers in references but that's all. You don't need to
<em>change</em> the number that a given object bears.

<p>However, for certain things, the <em>relative</em> numbers of
objects matter&nbsp;:

<ul>
  <li>if you have several player 1 starts in your level (which
    is how the voodoo doll trick is done), it's the
    highest-numbered one that the player incarnates in at level
    start,

  <li>if there are several teleport exits in the same sector,
    only the lowest-numbered one is used (but I don't know of
    any interesting application of this fact),

  <li>if there are several superimposed linedefs, the
    lowest-numbered one is drawn like it was in front,

  <li>BSP's transparent doors need one of the door tracks to be
    the lowest-numbered linedef,

  <li>certain linedef types apply only to the lowest-numbered of
    the tagged sectors (IIRC),

  <li>raising stairs use the lowest-numbered linedef.
</ul>

<p>So how do you control the ordering of objects&nbsp;?

			<h4><a name="toc-3-12-1">3.12.1. Exchanging objects numbers</a></h4>

This function works the same way in all modes. If you select
exactly two objects and press [<kbd>Ctrl-x</kbd>] (or use
"Edit-&gt;Exchange objects numbers") they exchange their
numbers. That is, if the first object had number <var>n1</var>
and the second object had number <var>n2</var>, the first object
in renumbered to <var>n2</var> and the second one to
<var>n1</var>. No other objects are renumbered.

<p>At the same time the numbers are exchanged, all relevant
references are fixed up. That is, if you exchange the numbers of
two vertices, all the linedefs that referred to them are changed
accordingly. And if you exchange the numbers of two sectors, all
the sidedefs that referred to them are fixed. The thing to
remember is that this function leaves the level functionally
identical to what it was before, except of course for the
possible side effects of the renumbering itself.

<p><small>(If you wanted (for some reason I can't imagine) to
exchange the numbers without fixing the references, you could do
it by replacing <code>true</code> by <code>false</code> in the
call to <code>exchange_objects_numbers()</code>.)</small>

		<h3><a name="toc-3-13">3.13. Selecting objects</a></h3>

There are several ways to select objects. The simplest is to
click on an object with the left mouse button. By default, when
you do that, all other previously selected objects are
unselected.

<p>If you want to select an object without unselecting
everything else, do the same thing but keep [<kbd>Ctrl</kbd>]
pressed while you click. You can also unselect an object this
way.

<p>You can also select several objects at a time with a
selection box. You know how to draw a selection box, don't
you&nbsp;? Well, it works the same in Yadex. If press
[<kbd>Ctrl</kbd>] while setting the first corner of the box, all
objects in the box will be "toggle-selected" (that is, selected
if they weren't, unselected if they were).

<p>A more advanced way to select objects is path-selection. With
path selection, you can easily select all the linedefs that
form an object with a single keystroke. There are two variants
of path selection.

<p>To use the first, you must first highlight a linedef. Then
press [<kbd>e</kbd>]. All the linedefs that belong to the same
non-forked path as the highlighted linedef are selected. For
example&nbsp;:</p>

<table align="center">
  <tr>
    <td><img src="e1.png" alt="Before pressing [e]" WIDTH=159 HEIGHT=127></td>
    <td><img src="e2.png" alt="After pressing [e]" WIDTH=159 HEIGHT=127></td>
  </tr>
  <tr>
    <td align="right"><i>Before pressing</i> [<kbd>e</kbd>]</td>
    <td align="right"><i>After pressing</i> [<kbd>e</kbd>]</td>
  </tr>
</table>

<p>Note how the selection stop at the first fork in the
path. That kind a path selection is good to select a path of
single- or double-sided linedefs that belong to the same sector.

<p>The other variant of path selection is better to select all
the linedefs that form a single pillar, even if not all of its
sides face the same sector. To use it, highlight a single-sided
linedef and press [<kbd>E</kbd>]. All the single-sided linedefs
that belong to the same path as the original one are
highlighted. For example&nbsp;:</p>

<table align="center">
  <tr>
    <td><img src="E1.png" alt="Before pressing [E]" WIDTH=156 HEIGHT=160></td>
    <td><img src="E2.png" alt="After pressing [E]" WIDTH=154 HEIGHT=160></td>
  </tr>
  <tr>
    <td align="right"><i>Before pressing</i> [<kbd>E</kbd>]</td>
    <td align="right"><i>After pressing</i> [<kbd>E</kbd>]</td>
  </tr>
</table>

<p>Note that the selection is not stopped by the forks in
the path.  Also note that the double-sided linedefs are not
selected.

<p>Like clicking, [<kbd>e</kbd>] and [<kbd>E</kbd>] have the
effect of unselecting everything else that was previously
selected unless you use [<kbd>Ctrl</kbd>]. If [<kbd>Ctrl</kbd>]
was pressed at the time you pressed [<kbd>e</kbd>] or
[<kbd>E</kbd>], all the linedefs that would have been selected
if you didn't press [<kbd>Ctrl</kbd>] are either removed from
the selection (if they were previously selected) or added to the
selection (if they weren't). This is actually simpler than it
sounds.

		<h3><a name="toc-3-14">3.14. The use of [<kbd>Shift</kbd>]</a></h3>

<p>The [<kbd>Shift</kbd>] key has an interesting property ; as
long as you hold it down, the highlight is locked. If an object
is not highlighted, it stays so even if you bring the mouse
pointer over it. Likewise, if an object is already highlighted,
it remains so, even if you move the pointer away from it.

<p>This can be useful in certain occasions, such as when you
want to compare two sectors that have other sectors between
them.

		<h3><a name="toc-3-15">3.15. Sector miscellaneous operations</a></h3>

<p>Unless otherwise specified, all the operation below act on
all the objects in the <em>working set</em>. If there is at
least one selected object, the working set is equal to the
selection. If there is no selected object, the working set is
the currently highlighted object (the object under the pointer).
If there is no selection and no highlighted object, the
selection is empty, of course. If there is a selection and an
object outside the selection, the latter is <em>not</em> part of
the working set.</p>

<dl>
  <dt>Find first free tag number
  <dd>Displays the smallest tag number greater than 0 and not
    used by any linedef or sector.

  <dt>Rotate and scale sectors
  <dd>(description to be written)

  <dt>Make door from sector
  <dd>(description to be written)

  <dt>Make lift from sector
  <dd>(description to be written)

  <dt>Distribute sector floor heights
  <dd>(description to be written)

  <dt>Distribute sector ceiling heights
  <dd>(description to be written)

  <dt>Raise or lower sectors...
  <dd>Prompts you for a number (N) and adds that number to the
    floor and ceiling heights of all the sectors in the working
    set. If N is positive, this results in raising the sectors
    by N units. If N is negative, this results in lowering the
    sectors by -N units.

  <dt>Brighten or darken sectors...
  <dd>Prompts you for a number (N) and adds that number to the
    light level of all the sectors in the working set. If N is
    positive, this results in sectors becoming brighter. If N is
    positive, this results in sectors becoming darker. No light
    level is decreased below 0 or increased above 255.

  <dt>Unlink room
  <dd>This function is not implemented yet.

  <dt>Mirror horizontally
  <dd>This function starts by determining the set <var>S</var>
    of vertices that are used by the sectors in the working set.
    Then all the vertices in <var>S</var> have their
    x-coordinate changed so that they're "mirrored" around the
    vertical axis that intersects the geometric centre of
    <var>S</var>. Finally, all the linedefs whose both vertices
    belong to <var>S</var> are flipped so that the sector
    references remain correct.

    <p>This function is designed to be used on either the whole
    level or a group of isolated sectors (like in the
    screenshots below). It is not recommended to use it on a
    group of sectors if that group is connected to other
    sectors. You can do it but the resulting mess might take you
    some time to untangle, especially if there are many
    connecting linedefs.

    <p>A common use for this function is when you have a
    symmetrical room with, say, the same staircase on both sides
    of the axis of symmetry. You can build one staircase, make a
    copy of it, mirror the copy and paste it on the other side
    of the room.

    <p>See the "Mirror horizontally" linedef function.

  <dt>Mirror vertically
  <dd>This function starts by determining the set <var>S</var>
    of vertices that are used by the sectors in the working set.
    Then all the vertices in <var>S</var> have their
    y-coordinate changed so that they're "mirrored" around the
    horizontal axis that intersects the geometric centre of
    <var>S</var>. Finally, all the linedefs whose both vertices
    belong to <var>S</var> are flipped so that the sector
    references remain correct.

    <p>This function is designed to be used on either the whole
    level or a group of isolated sectors (like in the
    screenshots below). It is not recommended to use it on a
    group of sectors if that group is connected to other
    sectors. You can do it but the resulting mess might take you
    some time to untangle, especially if there are many
    connecting linedefs.

    <p>A common use for this function is when you have a
    symmetrical room with, say, the same staircase on both sides
    of the axis of symmetry. You can build one staircase, make a
    copy of it, mirror the copy and paste it on the other side
    of the room.

    <p>See the "Mirror vertically" linedef function.

  <dt>Swap flats
  <dd>For each sector in the working set, exchange the floor
    texture with the ceiling texture.

</dl>

		<h3><a name="toc-3-16">3.16. Thing miscellaneous operations</a></h3>

<p>Unless otherwise specified, all the operation below act on
all the objects in the <em>working set</em>. If there is at
least one selected object, the working set is equal to the
selection. If there is no selected object, the working set is
the currently highlighted object (the object under the pointer).
If there is no selection and no highlighted object, the
selection is empty, of course. If there is a selection and an
object outside the selection, the latter is <em>not</em> part of
the working set.</p>

<dl>
  <dt>Find first free tag number
  <dd>Displays the smallest tag number greater than 0 and not
    used by any linedef or sector.

  <dt>Rotate and scale things
  <dd>(description to be written)

  <dt>Spin things 45° clockwise
  <dd>Subtract 45 to the angle of all the things in the working
    set. This is not to be confused with "Rotate and scale
    things" where it's the <em>position</em> of the things that
    is changed.

  <dt>Spin things 45° counter-clockwise
  <dd>Add 45 to the angle of all the things in the working set.
    This is not to be confused with "Rotate and scale things"
    where it's the <em>position</em> of the things that is
    changed.

  <dt>Mirror horizontally
  <dd>All the things in the working set have their x-coordinate
    changed so that they're "mirrored" around the horizontal
    axis that intersects the geometric centre of the things in
    the working set. Their angle is also adjusted.

    <p>It is not possible to mirror things without changing
    their angle (short of commenting out a couple of lines in
    <code>x_mirror.cc</code> and recompiling, of course).

  <dt>Mirror vertically
  <dd>All the things in the working set have their y-coordinate
    changed so that they're "mirrored" around the horizontal
    axis that intersects the geometric centre of the things in
    the working set. Their angle is also adjusted.

    <p>It is not possible to mirror things without changing
    their angle (short of commenting out a couple of lines in
    <code>x_mirror.cc</code> and recompiling, of course).
</dl>

		<h3><a name="toc-3-17">3.17. Setting/toggling/clearing thing flags</a></h3>

<p>In things mode, press [<kbd>a</kbd>] to open the "set thing
flags" popup menu. <br>Press [<kbd>b</kbd>] to open the "toggle
thing flags" popup menu. <br>Press [<kbd>c</kbd>] to open the
"clear thing flags" popup menu.

		<h3><a name="toc-3-18">3.18. Vertex miscellaneous operations</a></h3>

<p>Unless otherwise specified, all the operation below act on
all the objects in the <em>working set</em>. If there is at
least one selected object, the working set is equal to the
selection. If there is no selected object, the working set is
the currently highlighted object (the object under the pointer).
If there is no selection and no highlighted object, the
selection is empty, of course. If there is a selection and an
object outside the selection, the latter is <em>not</em> part of
the working set.</p>

<dl>
  <dt>Find first free tag number
  <dd>Displays the smallest tag number greater than 0 and not
  used by any linedef or sector.

  <dt>Rotate and scale vertices
  <dd>(description to be written)

  <dt>Delete vertex and join linedefs
  <dd>(description to be written)

  <dt>Merge several vertices into one
  <dd>(description to be written)

  <dt>Add a linedef and split sector
  <dd>To perform this operation, you must have exactly two
    vertices in the working set and there must be an
    uninterrupted path of linedefs that face a common sector
    between them. A new linedef is inserted from the first
    vertex to the second. The newly created sector is put on the
    left side of the new linedef.

  <dt>Mirror horizontally
  <dd>All the vertices in the working set have their
    x-coordinate changed so that they're "mirrored" around the
    vertical axis that intersects the geometric centre of the
    selected vertices.  Then all the linedefs whose both
    vertices belong to the group of selected vertices are
    flipped so that the sector references remain correct.

    <p>See the "Mirror horizontally" linedef function.

  <dt>Mirror vertically
  <dd>All the vertices in the working set have their
    y-coordinate changed so that they're "mirrored" around the
    horizontal axis that intersects the geometric centre of the
    the selected vertices. Then all the linedefs whose both
    vertices belong to the group of selected vertices are
    flipped so that the sector references remain correct.

    <p>See the "Mirror vertically" linedef function.
</dl>

		<h3><a name="toc-3-19">3.19. Linedef miscellaneous operations</a></h3>

<p>Unless otherwise specified, all the operation below act on
all the objects in the <em>working set</em>. If there is at
least one selected object, the working set is equal to the
selection. If there is no selected object, the working set is
the currently highlighted object (the object under the pointer).
If there is no selection and no highlighted object, the
selection is empty, of course. If there is a selection and an
object outside the selection, the latter is <em>not</em> part of
the working set.</p>

<dl>
  <dt>Find first free tag number
  <dd>Displays the smallest tag number greater than 0 and not
  used by any linedef or sector.

  <dt>Rotate and scale LD &amp; SD...
  <dd>(description to be written)

  <dt>Split linedefs (add new vertex)
  <dd>Split all linedefs in the working set, by adding a vertex
    in the middle.

    <p>The key [<kbd>x</kbd>] is a shortcut to this function.

  <dt>Split linedefs and sector
  <dd>Split both linedefs in the working set in the middle by
    adding a vertex for each, create a linedef between the two
    new vertices and split the sector with this new linedef.
    There must be exactly 2 linedefs in the working set and they
    must face a common sector.

    <p>The new linedef goes from the first linedef in the
    working set to the second linedef in the working set. The
    new sector is on the second sidedef of the new linedef.

    <p>There is a bug in this function ; if the sector contains
    other sectors, some sidedefs are given the wrong sector
    number.  Jim Flynn has recently fixed this in DETH. Anyone
    to look into it&nbsp;?

    <p>The key [<kbd>w</kbd>] is a shortcut to this function.

  <dt>Delete linedefs and join sector
  <dd>(description to be written)

  <dt>Flip linedefs
  <dd>The start and end vertices of the linedefs in the working
    set are swapped. Their sidedefs are also swapped, so that
    the sector references remain correct.

    <p>If you want to flip linedefs without swapping their
    sidedefs, you have to use "Flip linedefs" then "Swap
    sidedefs" on them.

  <dt>Swap sidedefs
  <dd>Swap the sidedefs of the linedefs in the working set
    <em>without</em> flipping the linedefs. This means that the
    sector references are also swapped. If you don't understand
    what this implies, don't use this function.

  <dt>Align textures (Y offset)
  <dd>This function is buggy.

  <dt>Align textures (X offset)
  <dd>This function is buggy.

  <dt>Remove 2nd sidedef (make single-sided)
  <dd>When two superimposed linedefs are merged, the result is
    often a two-sided linedefs, even though the second sidedef
    faces no sector.  Use this function to fix the mess.

    <p>It sets the I flag, clears the 2 flag, sets the second
      sidedef to -1, clears the upper and lower texture and
      resets the middle texture to the default (as defined in
      the preferences).

  <dt>Make rectangular nook (32x16)
  <dd>This is a single-key function to make a rectangular nook
    in the middle of a linedef. "Nook" means that, seen from the
    first side of the original linedef, the resulting 5 linedefs
    form a concave figure.

    <p>If the linedef is not long enough, the length of the nook
    is one third of the length of the linedef.</p>

    <table align="center">
      <tr>
	<td><img src="nook1.png" alt="Before" WIDTH=127 HEIGHT=159>
	<td><img src="nook2.png" alt="After" WIDTH=127 HEIGHT=159>
      </tr>
      <tr>
	<td align="right"><i>Before</i>
	<td align="right"><i>After</i>
      </tr>
    </table>

  <dt>Make rectangular boss (32x16)
  <dd>Same thing as "Make rectangular nook" but the resulting
    figure is convex.

  <dt>Set length (move 1st vertex)
  <dd>Prompts you for a length and moves the 1st vertex of the
    linedefs in the working set so that they have the length you
    specified.

  <dt>Set length (move 2nd vertex)
  <dd>Same thing as "Set length (move 1st vertex) but moves the
    2nd vertex.

  <dt><a name="unlink_sidedefs">Unlink 1st sidedef</a>
  <dd>This function is used when you have several linedefs
    sharing common sidedefs and you don't want them to share any
    sidedefs anymore so that you can, for instance, change the
    sector reference or texture of one of the linedefs
    independently from the others.

    <p>Here is how it works&nbsp;: all sidedefs that are used on
    the first side of any linedef in the working set and on any
    side of any linedef <em>not</em> in the working set are
    duplicated and the first side of the concerned linedefs in
    the working set is set to use the copy instead of the
    original.

    <p>Gotcha&nbsp;: note that the linedefs in the working set
    are not "unlinked" from each other. They are only "unlinked"
    from any other (i.e. not in the working set) linedefs.
    Thus, if you have <em>n</em> linedefs that you want to
    unlink from each other, you have to unlink every one of them
    separately. This is so that, if you have, say, two square
    pillars (2 x 4 linedefs that all use the same sidedef), you
    can easily unlink one pillar from the other while still
    having its 4 linedefs all use the same sidedef.

  <dt>Unlink 2nd sidedef
  <dd>Same as "Unlink 1st sidedef" but with second sidedef
    instead of first sidedef.

  <dt>Mirror horizontally
  <dd><p>This function starts by determining the set <var>S</var>
    of vertices that are used by any of the linedefs in the
    working set. Then all the vertices in <var>S</var> have
    their x-coordinate changed so that they're "mirrored" around
    the vertical axis that intersects the geometric centre of
    <var>S</var>. Finally, all the linedefs whose both vertices
    belong to <var>S</var> are flipped so that the sector
    references remain correct.</p>

    <table align="center">
      <tr>
	<td><img src="mirror0.png" alt="Before" WIDTH=125 HEIGHT=125>
	<td><img src="mirrorh.png" alt="After" WIDTH=125 HEIGHT=125>
      </tr>
      <tr>
	<td align="right"><i>Before</i>
	<td align="right"><i>After</i>
      </tr>
    </table>

    <p>This function is designed to be used on either the whole
    level or a group of isolated linedefs (like in the
    screenshots below). It is not recommended to use it on a
    group of linedefs if that group is connected to other
    linedefs. You can do it but the resulting mess might take
    you some time to untangle, especially if there are many
    connecting linedefs.

    <p>A common use for this function is when you have a
    symmetrical room with, say, the same staircase on both sides
    of the axis of symmetry. You can build one staircase, make a
    copy of it, mirror the copy and paste it on the other side
    of the room.

  <dt>Mirror vertically
  <dd><p>This function starts by determining the set <var>S</var>
    of vertices that are used by any of the linedefs in the
    working set. Then all the vertices in <var>S</var> have
    their y-coordinate changed so that they're "mirrored" around
    the horizontal axis that intersects the geometric centre of
    <var>S</var>. Finally, all the linedefs whose both vertices
    belong to <var>S</var> are flipped so that the sector
    references remain correct.</p>

    <table align="center">
      <tr>
	<td><img src="mirror0.png" alt="Before" WIDTH=125 HEIGHT=125>
	<td><img src="mirrorv.png" alt="After" WIDTH=125 HEIGHT=125>
      </tr>
      <tr>
	<td align="right"><i>Before</i>
	<td align="right"><i>After</i>
      </tr>
    </table>

    <p>This function is designed to be used on either the whole
    level or a group of isolated linedefs (like in the
    screenshots below). It is not recommended to use it on a
    group of linedefs if that group is connected to other
    linedefs. You can do it but the resulting mess might take
    you some time to untangle, especially if there are many
    connecting linedefs.

    <p>A common use for this function is when you have a
    symmetrical room with, say, the same staircase on both sides
    of the axis of symmetry. You can build one staircase, make a
    copy of it, mirror the copy and paste it on the other side
    of the room.

  <dt>Cut a slice out of a sector
  <dd><p>You must select exactly two linedefs that face the same
    sector S. This function creates a linedef A that goes from
    the first selected linedef to the second and a linedef B
    that goes from the second to the first. A new sector is
    created between those four linedefs, with attributes
    identical to those of S.</p>

    <table align="center">
      <tr>
	<td><img src="slice1.png" alt="Before" WIDTH=150 HEIGHT=150>
	<td><img src="slice2.png" alt="After" WIDTH=150 HEIGHT=150>
      </tr>
      <tr>
	<td align="right"><i>Before</i>
	<td align="right"><i>After</i>
      </tr>
    </table>

    <p>This function is somewhat similar to
    "split-linedefs-and-sector" except that it creates two
    linedefs instead of one and that it works on doughnut-shaped
    sectors. In fact, this function is the only one that can
    split a sector when there is no linedef path between the
    split points (which is the case when splitting a
    doughnut-shaped sector between its inner and outer borders).

    <p>If there is a linedef path between the selected linedefs,
    this function is equivalent to using
    "add-linedefs-and-split-sector" twice, except that you end
    up with two sectors, not three. FIXME - need a figure.

    <p>If the selected linedefs happen to share a vertex, only
    one linedef is created and the new sector is triangular. The
    linedefs must not be the same or superimposed. FIXME - need
    a figure.

    <p>Linedefs A and B are created with all their attributes
    set to zero and their middle textures set to "<tt>-</tt>".
    They're oriented so that their right sidedefs face the new
    sector. Linedef A is the lowest-numbered one.

    <p>The following restrictions apply&nbsp;:

    <ul>
      <li>selected linedefs must not have two sidedefs in the same sector,
      <li>selected linedefs must not share more than one sector,
      <li>there must be no linedef that would be superimposed with A or B.
    </ul>

    <p>These restrictions are stricter than necessary. They may
    be lifted in the future if time and brain power permit.

    <p>Because this function is not aware of the geometry of the
    selected linedefs, but only of the sectors they face, it can
    be used to split sectors in impossible ways. FIXME - need a
    figure.

    <p>This function assumes the space between the selected
    linedefs is empty. If there are any other linedefs there,
    you will have to fix their sector references manually
    afterwards.

    <p>The key [<kbd>Ctrl-k</kbd>] is a shortcut to this
    function.
</dl>

		<h3><a name="toc-3-20">3.20. Setting/toggling/clearing linedef flags</a></h3>

<p>In linedefs mode, press [<kbd>a</kbd>] to open the "set
linedef flags" popup menu.
<br>Press [<kbd>b</kbd>] to open the "toggle linedef flags" popup menu.
<br>Press [<kbd>c</kbd>] to open the "clear linedef flags" popup menu.

		<h3><a name="toc-3-21">3.21. Undoing</a></h3>

<p>As of this release, undoing is not implemented.

		<h3><a name="toc-3-22">3.22. Cut-and-paste from one level to another</a></h3>

<p>As of this release, it's not possible.

		<h3><a name="toc-3-23">3.23. Using the flat/patch/sprite/texture viewer</a></h3>

<p>Flats, patches, sprites and textures are browsed and selected
with the same basic tool, snappily named the
flat/patch/sprite/texture viewer. How do you use that
beast&nbsp;?

<p><img src="vflat.png" alt="Browsing flats" WIDTH=315 HEIGHT=86>

<p><img src="vsprite.png" alt="Browsing sprites" WIDTH=379 HEIGHT=149>

<p><img src="vtexture.png" alt="Browsing textures" WIDTH=507 HEIGHT=149>

<p>You can change the current name simply by typing it. Use
[<kbd>Backspace</kbd>] to erase the rightmost character. As you
type, the list of names scrolls automatically so that the first
line of the list shows the first valid name that begins with the
characters in the entry box. If the current name does not belong
to the list, it is grayed out and you can't validate. If it
does, the corresponding image is shown in the box to the right.

<p>As in certain Unix programs, [<kbd>Tab</kbd>] is used for
name completion. If the current name is "<code>SW1</code>" and
you press [<kbd>Tab</kbd>], the current name is set to the first
name that begins with "<code>SW1</code>".

<p>[<kbd>Ctrl-u</kbd>] and [<kbd>Ctrl-w</kbd>] clear the current
name, like pressing [<kbd>Backspace</kbd>] repeatedly would.

<p>You can also move through the list without typing
names&nbsp;:

<ul>
  <li>[<kbd>Up</kbd>] and [<kbd>Down</kbd>] move to the previous
  or next name in the list.

  <li>[<kbd>Pgup</kbd>] and [<kbd>Pgdn</kbd>] move one page at a
  time.

  <li>[<kbd>Home</kbd>] and [<kbd>End</kbd>] move you to the
  first or last name of the list.

  <li>[<kbd>Ctrl-b</kbd>] does the same thing as
  [<kbd>Pgup</kbd>].

  <li>[<kbd>Ctrl-f</kbd>] and [<kbd>Ctrl-v</kbd>] do the same
  thing as [<kbd>Pgdn</kbd>].
</ul>


<p>To validate the current name as your choice, press
[<kbd>Return</kbd>]. If the current name is grayed-out
(invalid), [<kbd>Return</kbd>] does not work. To cancel, press
[<kbd>Esc</kbd>].

<p>[<kbd>Shift-F1</kbd>] saves the current image to file, in
packed PPM (<tt>P6</tt>) format. This can be useful for
textures, that cannot be directly extracted from wads.
Transparent areas are represented according to the DeuTex
convention by colour rgb:0/2f/2f (<img src="002f2f.png"
alt="Swatch" width="8" height="8">). The file is created in the
working directory and its name is the name of the image
lowercased and suffixed by "<tt>.ppm</tt>".  For example, flat
"<tt>FLOOR0_7</tt>" would be saved as "<tt>./floor0_7.ppm</tt>".
If the file already exists, it's mercilessly overwritten.

<p>Note that under MS-DOS, newlines in the PPM header are in
Unix format (LF, not CR LF).</p>

<p>There are a few bugs left in this function. Textures are
clipped to the dimension of the viewer window. Under MS-DOS,
some "<tt>VILE*</tt>" sprites will not save, because their names
contain characters that are not allowed in file names
("<tt>[</tt>", "<tt>\</tt>" and "<tt>]</tt>").

<p>[<kbd>F1</kbd>] prints to stdout the location (file name and
offset) of the current flat, patch or sprite. For debugging
purposes.

<p>When viewing textures, you may press [<kbd>Ctrl-a</kbd>] and
[<kbd>Ctrl-x</kbd>] to cycle through the patches that make up
the texture.

<p>Finally when viewing sprites, two other useful commands are
[<kbd>Ctrl-n</kbd>] and [<kbd>Ctrl-p</kbd>]. These go
respectively to the next and previous group of sprites (all
sprites that have the same first 4 letters belong to the same
group). It's handy to skip the 69 animation frames of the heavy
weapon dude at once.

		<h3><a name="toc-3-24">3.24. Saving</a></h3>

<p>There are two ways to save&nbsp;:

<ul>
  <li><p>Press [<kbd>F2</kbd>] or do "File-&gt;Save". If the level
    comes from the iwad or if its level name or file name is
    unknown (because it's a new level), you are prompted for a
    level name (EnMn or MAPnm) and a file name first. If the
    file name has changed since the last time you saved, and if
    a file of that name already exists, you are asked
    confirmation before saving.

    <p>The level in the window is saved in the specified file,
    in the pwad format, under the specified .

  <li><p>Press [<kbd>F3</kbd>] or do "File-&gt;Save as".
    This procedure is identical to the "Save" procedure except
    that the query for a level name and file name is
    unconditional.
</ul>

<p>FIXME -- this needs to be written...

<p>If Yadex is in Hexen mode, saving is disabled because writing
levels in the Hexen format is not supported as of this release.



		<h3><a name="toc-3-25">3.25. Closing a window</a></h3>

<p>There are two ways to close a window&nbsp;:

<ul>
  <li><p>Press [<kbd>Esc</kbd>]. If you have made changes since the
    last time you saved, or if you have never saved, Yadex
    requires confirmation before closing the window.

  <li><p>Press [<kbd>q</kbd>] or do "File-&gt;Quit". If
    you have made changes since the last time you saved, or if
    you have never saved, Yadex first saves the level, using the
    same procedure as when you press [<kbd>F2</kbd>]. After that
    the window is closed. If the saving procedure is interactive
    (for example because it's the first time you save), and if
    you cancel it, the window is not closed.

</ul>

	<hr noshade>
	<h2><a name="toc-4">4. Variables and configuration</a></h2>

<p>
  Yadex has internal variables that serve to configure its
  behaviour. Variables have a name (a string of letters, digits
  and underscores), a type and a value. The type constraints
  the value (boolean, integer, strings, etc.).
</p>

<p>
  Variables can be set in four ways&nbsp;: 
</p>

<ul>
  <li>from the Preferences menu,
  <li>from the command line,
  <li>through environment variables.
  <li>from the configuration files,
</ul>

<p>
  The settings from the Preferences menu override those from the
  command line options which in turn override those from the
  environment variables which in turn override those from the
  configuration files.
</p>

		<h3><a name="toc-4-1">4.1. Variables</a></h3>

<p>
  You can get a list of variables with their description and value
  by typing <code>set</code> at the <code>yadex:</code> prompt.
</p>

			<h4><a name="toc-4-1-1">4.1.1. The font</a></h4>

<p>
  By default, Yadex uses the default font of your system (that
  is often "<code>fixed</code>" a.k.a. "<code>6x13</code>"). But
  you can use the font of your choice by using the "<code>-fn
  </code><var>font_name</var>" option or setting
  "<code>font&nbsp;=&nbsp;</code><var>font_name</var>" in
  <code>yadex.cfg</code>. You should use a fixed-width font and
  not one that is too large for the size of your Yadex window or
  the display will look ugly. If Yadex does not find the
  specified font, it emits a warning and falls back on the
  default system font.
</p>

<p>
  You can get a list of all available fonts on your system with
  the command <code>xlsfonts</code>.
</p>

			<h4><a name="toc-4-1-2">4.1.2. Mouse wheel and other mouse issues</a></h4>

<p>
  The 3rd mouse button (middle button) is not used yet but you
  can bet it will a future version. So a 3-button mouse is of
  course recommended.
</p>

<p>
  You can swap the left and right buttons by setting the <a
  href="#param_swap_buttons"><code>swap_buttons</code></a>
  variable.
</p>

<p>
  Buttons 4 and 5 are used for zooming in and out. Wheel mice
  typically have the wheel mapped to buttons 4 and 5 in such a
  way that when you roll the wheel "up" (forwards), button4
  press events are generated and when you roll the wheel "down"
  (backwards), button5 press events are generated.
</p>
  
<p>
  To configure your X server in the way described above, check
  the vendor documentation. I have XFree86 and a Logitech Pilot
  Mouse + and this is what I put in my <code>XF86Config</code>
  file&nbsp;:
</p>

<blockquote>
  <pre>Section "Pointer"
    Protocol      "Intellimouse"
    Device        "/dev/mouse"
    Buttons       5
    ZAxisMapping  4 5</pre>
</blockquote>

		<h3><a name="toc-4-2">4.2. Preferences</a></h3>

<p>
  When you create objects, their properties are automatically
  given default values. Some of those default values can be set
  from the configuration file or from the command line but also
  through the Preferences menu, that pops up when you press
  [<kbd>F5</kbd>].
</p>

<p>
  The Preferences menu lets you set the <code>default_*</code>
  variables interactively. The settings made from the
  Preferences menu are lost when you exit Yadex.
</p>

		<h3><a name="toc-4-3">4.3. Command line</a></h3>

<p>
  See the <a href="#opt">Options</a> section.
</p>

		<h3><a name="toc-4-4">4.4. Environment variables</a></h3>

<p>
  See the <a href="#env">Environment variables</a> section.
</p>

		<h3><a name="toc-4-5">4.5. Configuration files</a></h3>

			<h4><a name="toc-4-5-1">4.5.1. Contents of configuration files</a></h4>

<p>Configuration files are text files. White space at the
beginning of a line is ignored. There are three kinds of
lines&nbsp;:

<dl>
  <dt>Empty lines (lines containing only white space)
  <dd>
    <p>
      No effect.
    </p>
  
  <dt>Comments (lines whose first non white space character is a
      <code>#</code>)
  <dd>
    <p>
      No effect.
    </p>

  <dt>Variable assignments (lines of the form "<i>name</i>
      <code>=</code> <i>value</i>")
  <dd>
    <p>The effect is to assign <i>value</i> to the variable
      <i>name</i>. <i>name</i> is a string of one or more
      <i>identifier characters</i> i.e. letters, digits and
      underscores. <i>value</i> is a string of zero or more
      non white space characters. There may be any amount of
      white space around and between the three tokens, including
      none at all.
    </p>

    <p>
      Please note that&nbsp;:
    </p>

    <ul>
      <li>
        <p>
	  <code>#</code> is special only at the beginning of a
	  line. Therefore you can't put a comment on the same
	  line as a variable assignment.
	</p>
      </li>

      <li>
        <p>
	  Because white space is a token delimiter and there's
	  no way to quote or escape it, including white space in
	  a value is impossible.
	</p>
      </li>

      <li>
        <p>
	  Yadex's idea of what is a letter or digit is
	  deliberately locale-independent. Whether it's white
	  space or not, on the other hand, is locale-dependent
	  (<code>isspace</code>(3)).
	</p>
      </li>
    </ul>
</dl>

<p>
  Parse errors are not fatal. In general, they cause a warning
  message to be printed and the entire line to be ignored. This
  is to facilitate the sharing of configuration files across
  versions of Yadex.
</p>

<p>
  The configuration file is self-documenting. Look at the sample
  configuration file in the Yadex distribution to see what
  options are available.
</p>

			<h4>4.5.2. <a name="config_locate">Locating
			configuration files</a></h4>

<p>
  This is the process by which Yadex turns a configuration file
  name into one or more actual pathnames.
</p>

<p>
  If the specified name is absolute, the location yields exactly
  that. A name is considered absolute if and only if it begins
  with a <code>/</code>.
</p>

<p>
  If the specified name is relative, Yadex uses a search path,
  much like the shell uses <code>$PATH</code> to locate
  commands. The composition of the search path depends on the
  installation prefix (the argument to <code>./configure
  --prefix</code>).
</p>

<dl>
  <dt><code>/usr/local</code> or <code>/usr</code>&nbsp;:
  <dd>
    <ol>
      <li><code>.</code>
      <li><code>~/.yadex/1.7.1</code>
      <li><code>~/.yadex</code>
      <li><code>/etc/yadex/1.7.1</code>
      <li><code>/etc/yadex</code>
    </ol>

  <dt><code>/opt/<var>some/path</var></code>&nbsp;:
  <dd>
    <ol>
      <li><code>.</code>
      <li><code>~/.yadex/1.7.1</code>
      <li><code>~/.yadex</code>
      <li><code>/etc/opt/<var>some/path</var></code>
    </ol>

  <dt><code><var>/some/path</var></code>&nbsp;:
  <dd>
    <ol>
      <li><code>.</code>
      <li><code>~/.yadex/1.7.1</code>
      <li><code>~/.yadex</code>
      <li><code><var>/some/path</var>/etc</code>
    </ol>
</dl>

<p>
  The search path may be walked in either direction, depending
  on the application. For each element in the search path, a
  pathname is made by concatenating the path and the specified
  name. The pathname is tested with <code>stat</code>(2). The
  result of the location is the list of the pathnames that exist
  and are not directories.
</p>

<p>
  For example, assuming Yadex was compiled with the
  <code>/usr/local</code> prefix, a front-to-back search for a
  file named <code>foo/bar.cfg</code> would return those of the
  following pathnames that exist and are not directories&nbsp;:
</p>

<ol>
  <li><code>./foo/bar.cfg</code>
  <li><code>~/.yadex/1.7.1/foo/bar.cfg</code>
  <li><code>~/.yadex/foo/bar.cfg</code>
  <li><code>/etc/yadex/1.7.1/foo/bar.cfg</code>
  <li><code>/etc/yadex/foo/bar.cfg</code>
</ol>

			<h4><a name="toc-4-5-3">4.5.3. Default configuration files</a></h4>

<p>
  By default, Yadex performs a back-to-front search for files
  named <code>yadex.cfg</code> and reads all the matches in
  order. For example, assuming Yadex was compiled with the
  <code>/usr/local</code> prefix, the following configuration
  files will be read if they exist&nbsp;:
</p>

<ol>
  <li><code>/etc/yadex/yadex.cfg</code>
  <li><code>/etc/yadex/1.7.1/yadex.cfg</code>
  <li><code>~/.yadex/yadex.cfg</code>
  <li><code>~/.yadex/1.7.1/yadex.cfg</code>
  <li><code>./yadex.cfg</code>
</ol>

<p>
  Because the search path is walked back-to-front, any parameter
  settings in a local configuration file override the settings
  inherited from less local configuration files. For example,
  assuming <code>/etc/yadex/1.7.1/yadex.cfg</code>
  contains&nbsp;:
</p>

<blockquote>
  <code>
    a = old<br>
    b = old
  </code>
</blockquote>

<p>
  and <code>./yadex.cfg</code> contains&nbsp;:
</p>

<blockquote>
  <code>
     a = new<br>
     c = new
  </code>
</blockquote>

<p>
  the net effect is&nbsp;:
</p>

<blockquote>
  <code>
     a = new<br>
     b = old<br>
     c = new
  </code>
</blockquote>

			<h4><a name="toc-4-5-4">4.5.4. User-specified configuration files</a></h4>

<p>
  The <code>-f</code> option can be used to override Yadex's
  default choice of configuration files.
</p>

<p>
  If Yadex is started with the <code>-f</code> option, the
  default configuration files are not used. Instead, Yadex
  performs a front-to-back search for the argument of the
  <code>-f</code> option, according to the algorithm described
  in <a href="#config_locate">Locating configuration files</a>.
  The first match is used as a configuration file. Any other
  matches are ignored.
</p>

<p>
  For example, assuming Yadex was built with the
  <code>/usr/local</code> prefix and run with the
  <code>-f&nbsp;myown.cfg</code> option, it will use the first
  file in this list that exists and is not a directory&nbsp;:
</p>

<ol>
  <li><code>./myown.cfg</code>
  <li><code>~/.yadex/1.7.1/myown.cfg</code>
  <li><code>~/.yadex/myown.cfg</code>
  <li><code>/etc/yadex/1.7.1/myown.cfg</code>
  <li><code>/etc/yadex/myown.cfg</code>
</ol>

			<h4><a name="toc-4-5-5">4.5.5. Organising your configuration files</a></h4>

<p>
  As Yadex looks for its configuration files in several places,
  you are put in the situation of having to decide which one to
  use. Here are a few guidelines to help you make a decision.
</p>

<dl>
  <dt>Avoid redundancy
  <dd>
    <p>
      Take advantage of Yadex's ability to use more than one
      config file. Put each setting in the right place. Your
      config files will be easier to read and maintain.
    </p>

  <dt>Versionless vs. versionful files
  <dd>
    <p>
      Versionful files
      (<code>/etc/yadex/1.7.1/yadex.cfg</code> and
      <code>~/.yadex/1.7.1/yadex.cfg</code>) are useful to
      store settings that only work with a particular version of
      Yadex. But remember that the versionful system-wide file
      can be clobbered by a reinstallation.
    </p>

    <p>
      Versionless files (<code>/etc/yadex/yadex.cfg</code> and
      <code>~/.yadex/yadex.cfg</code>) have the advantage of
      being seen by all versions of Yadex. If you enter your
      settings there, you won't have to enter them again when
      you install a new version of Yadex, as long as the config
      file syntax remains compatible. 
    </p>

  <dt>System-wide vs. user vs. local files
  <dd>
    <p>
      System-wide configuration files have the theoretical
      advantage of being seen by all users, which makes them a
      good place to put settings that apply to everybody, such
      as the pathnames of the iwads. Of course, it doesn't make
      any difference for the typical (single-user) Yadex
      installation.
    </p>

    <p>
      Per-user files (the ones in <code>~/.yadex</code>) are
      appropriate for settings that have to do with personal
      preferences (fonts etc.). They also have the advantage
      over system-wide files of not being overwritten by the
      installation procedure (typing <code>make install</code> a
      second time will wipe the versionful system file).
    </p>

    <p>
      Local files (<code>./yadex.cfg</code>) are well suited to
      settings that vary from project to project, such as
      default textures.
    </p>
</dl>

<p>
  Concrete application&nbsp;: Yadex was compiled with
  <code>/usr/local</code> as the prefix. You are the only user
  on your system. All your levels are for Doom&nbsp;2, except
  the one in <code>~/herewad</code> which is for Heretic. One of
  your Doom&nbsp;2 levels (<code>~/cave</code>) is quite dark
  and requires a different default light level. You usually run
  Yadex from the directory where the pwad is.
</p>

<p>
  There are several ways to configure Yadex for this setup.
  Here's a solution in accordance with the above
  guidelines&nbsp;:
</p>

<p>
  <code>~/.yadex/yadex.cfg</code>&nbsp;:
</p>

<blockquote>
  <pre>iwad2 = /somewhere/doom2.wad
iwad3 = /somewhere/else/heretic.wad
game  = doom2</pre>
</blockquote>

<p>
  <code>~/herewad/yadex.cfg</code>&nbsp;:
</p>

<blockquote>
  <pre>game                    = heretic
default_floor_texture   = floor11
default_ceiling_texture = floor06
default_lower_texture   = sandsq2
default_middle_texture  = sandsq2
default_upper_texture   = sandsq2
default_thing           = 66</pre>
</blockquote>

<p>
  <code>~/cave/yadex.cfg</code>&nbsp;:
</p>

<blockquote>
  <pre>default_light_level = 112</pre>
</blockquote>

<p>
  Note how <code>game</code> is set in the per-user config file
  (the general case) and overridden in the local config file for
  Heretic level (the exception).  
</p>

	<hr noshade>
	<h2><a name="toc-5">5. Game definition files</a></h2>

<p>
  Most of Yadex's knowledge about thing numbers and names,
  linedef types etc. is retrieved from so-called game definition
  files. When you specify "<code>-g&nbsp;foo</code>", it in
  fact means that Yadex should use the game definition file
  named "<code>foo.ygd</code>".
</p>

		<h3><a name="toc-5-1">5.1. Contents of game definition files</a></h3>

<p>
  For Yadex to recognize the file as a game definition file, it
  must begin with a certain magic string. If it doesn't, Yadex
  will print an error message an bail out. The reason for being
  so fussy is to avoid headaches when the game definition file
  format changes and there are old game definition files lying
  around in your directories.
</p>

<p>
  Game definition files are not supposed to be modified in
  normal use. Their format is described in <a
  href="ygd.html"><code>ygd.html</code></a>.
</p>

		<h3>5.2. <a name="ygd_locate">Locating game definition
		files</a></h3>

<p>
  The algorithm used to locate game definition files is exactly
  the same as the one described in  <a
  href="#config_locate">Locating configuration files</a>. Only
  the search path is different. As is the case for config files,
  it depends on the prefix for which Yadex was compiled.
</p>

<dl>
  <dt><code>/usr</code>&nbsp;:
  <dd>
    <ol>
      <li><code>.</code>
      <li><code>~/.yadex/1.7.1</code>
      <li><code>~/.yadex</code>
      <li><code>/usr/share/games/yadex/1.7.1</code>
      <li><code>/usr/share/games/yadex</code>
    </ol>

  <dt><code>/usr/local</code>&nbsp;:
  <dd>
    <ol>
      <li><code>.</code>
      <li><code>~/.yadex/1.7.1</code>
      <li><code>~/.yadex</code>
      <li><code>/usr/local/share/games/yadex/1.7.1</code>
      <li><code>/usr/local/share/games/yadex</code>
    </ol>

  <dt><code>/opt/<var>some/path</var></code>&nbsp;:
  <dd>
    <ol>
      <li><code>.</code>
      <li><code>~/.yadex/1.7.1</code>
      <li><code>~/.yadex</code>
      <li><code>/opt/<var>some/path</var>/share</code>
    </ol>

  <dt><code><var>/some/path</var></code>&nbsp;:
  <dd>
    <ol>
      <li><code>.</code>
      <li><code>~/.yadex/1.7.1</code>
      <li><code>~/.yadex</code>
      <li><code><var>/some/path</var>/share</code>
    </ol>
</dl>

		<h3><a name="toc-5-3">5.3. Use of game definition files</a></h3>

<p>
  On startup, Yadex loads the game definition file corresponding
  to the <code>game</code> variable. It performs a front-to-back
  search (see <a href="#ygd_locate">Locating game definition
  files</a>) for a file named <code><var>game</var>.ygd</code>.
  The first match is used.
</p>

	<hr noshade>
	<h2><a name="toc-6">6. Known bugs</a></h2>

<p>Though Yadex has quite a few bugs, most of them are
inconsequential, i.e. not likely to make Yadex unusable or
damage precious data. On the other hand, <strong>some can
bite</strong>. Those are the ones you should know about&nbsp;:

<ul>
  <li>
    <p>Command line options that take an argument need to have
    a space between their argument and themselves.</p>

  <li>
    <p>Exposure events are not always handled.  If the Yadex
    window turns black, back out by pressing [<kbd>Esc</kbd>],
    several times if necessary.</p>

  <li>
    <p>If you edit a level from a file that contains several and
    save it, all the other levels, textures, flats, etc. from
    that file are <strong>lost</strong>.</p>

  <li>
    <p>Out-of-memory conditions and certain wad I/O errors are
    handled in a <em>very</em> ungraceful manner. Basically,
    Yadex aborts and if you haven't saved, you've lost all your
    work. My advice&nbsp;:</p>

    <ul>
      <li>Make sure you have at least a couple of megs of free
	memory.
      <li>Save often and make backups.
      <li>Don't use wads that contain errors.
      <li>Make sure you have enough disk space and adequate
	permissions.
      <li>Don't modify files with an external program while
	Yadex uses them. For example, if you use a texture wad,
	don't rebuild it without quitting Yadex first.
    </ul>
</ul>

<p>Check <a href="TODO"><code>TODO</code></a> for a complete
list of things to fix.

	<hr noshade>
	<h2>7. <a name="games">Supported games</a></h2>

		<h3><a name="toc-7-1">7.1. Doom</a></h3>

<p>Supported. Linedef types and sector types added in v. 1.666
are supported and marked with "<code>[v1.6]</code>".

		<h3><a name="toc-7-2">7.2. Doom II</a></h3>

<p>Supported.

		<h3><a name="toc-7-3">7.3. Doom alpha</a></h3>

<p>Mostly supported. There are three Doom alpha versions that I
know of&nbsp;: <a
href="ftp://3darchives.in-span.net/pub/idgames/historic/doom0_2.zip">0.2</a>,
<a
href="ftp://3darchives.in-span.net/pub/idgames/historic/doom0_4.zip">0.4</a>
and <a
href="ftp://3darchives.in-span.net/pub/idgames/historic/doom0_5.zip">0.5</a>.
They're supported to varying degrees of completeness. All
graphics resources (flats, patches, <code>PLAYPAL</code>,
sprites and textures) are supported for all versions with the
exception of version 0.2, for which textures are not supported.

<p>Reading levels does not work either for version 0.2. For
version 0.4 and 0.5, it works, including levels
<code>E1M10</code> through <code>E1M13</code>. There are some
oddities in the levels, such as linedefs with negative types or
things with strange bits set in their flags, but I don't think
it's Yadex's fault.

<p>You can edit and save alpha levels but they will be saved in
the regular Doom format, not the alpha format. Writing levels in
the Doom alpha format is not supported at all and probably never
will, for three reasons. Firstly, there are parts of the format
that I don't understand, and therefore don't know how to
generate. Secondly, there is AFAIK no nodes builder for the
alphas. Thirdly, even if the two above problems were solved, I
don't expect many people to actually want to use the alphas
because, from a player point of view, they're much less
comfortable than the later versions of Doom. To say nothing of
the fact that all we have is a DOS executable and no source
code. That being said, I can't deny that it would indeed be cool
to be able to generate wads for the alphas, if only for the fun
of it. If you want to do it, I won't discourage you and I will
gladly accept patches.

		<h3><a name="toc-7-4">7.4. Doom press release pre-beta</a></h3>

<p>Supported. The different picture format is handled. Things
type 2016 (evil sceptre) and 2017 (unholy bible) are defined in
<code>doom02.ygd</code>, <code>doom04.ygd</code>,
<code>doom05.ygd</code>, <code>doompr.ygd</code>,
<code>doom.ygd</code> and <code>doom2.ygd</code> and marked with
"<code>[PR]</code>".  However, if you're using
<code>betalevl.wad</code> and <code>betagrph.wad</code> supplied
with MBF, you won't see the corresponding sprites because Yadex
does not support sprites in pwads (yet). To see the sprites for
the evil sceptre and the unholy bible as well as the alternate
versions of the other sprites, you need to use the iwad from <a
href="ftp://3darchives.in-span.net/pub/idgames/historic/doomprbt.zip"
><code>doomprbt.zip</code></a>.

		<h3><a name="toc-7-5">7.5. Final Doom</a></h3>

<p>Supported, AFAIK. The iwads have no
<code>F1_START/F1_END</code> labels and some levels contain a
thing of type 0 which made older versions of Yadex crash. This
has been fixed in version 1.1.0.

		<h3><a name="toc-7-6">7.6. Heretic</a></h3>

<p>Supported.

		<h3><a name="toc-7-7">7.7. Hexen</a></h3>

<p>Very rudimentary support. You can load Hexen wads and edit
the maps but most of Hexen's special features are stripped off
on reading. So don't try to save a Hexen level after editing it,
you won't be able to use it with Hexen. And if you're saving it
to the file it comes from, you'll lose your file. <strong>Don't
save when in Hexen mode.</strong>. Here's the breakdown&nbsp;:

<ul>
  <li>Most thing types, and some sector and linedef types are
    missing from <code>hexen.ygd</code>.
  <li>For things, <code>tid</code>, <code>z</code>,
    <code>special</code> and <code>arg1</code> through
    <code>arg5</code> are discarded. There is currently no way
    to examine or manipulate them from Yadex.
  <li>For linedefs, <code>arg1</code> is put into
    <code>tag</code>. <code>arg2</code> through
    <code>arg5</code> are discarded and there is currently no way
    to examine or manipulate them from Yadex.
  <li>The Hexen-specific thing and linedef flags are not
    recognized (but you can manipulate them).
  <li><code>BEHAVIOR</code> is ignored.
  <li><code>MAPINFO</code> is ignored.
</ul>

		<h3><a name="toc-7-8">7.8. Strife</a></h3>

<p>Supported, except that&nbsp;:

<ul>
  <li>many thing types are missing,
  <li>some thing flags are not known,
  <li>many linedef types are missing or wrong,
  <li>some linedef flags might be missing,
  <li>some sector types might be missing.
</ul>

And perhaps other things as well. If you're a Strife hacker,
your help would be welcome.

<p>If you have Strife 1.0, you should use
<code>-g&nbsp;strife10</code>. Strife&nbsp;1.0 uses the same
format as Doom for textures, Strife&nbsp;1.1 and later use a
different format.

		<h3><a name="toc-7-9">7.9. Ultimate Doom</a></h3>

<p>Supported.

		<h3><a name="toc-7-10">7.10. Boom</a></h3>

<p>Kind of supported, only very inconvenient to use &lt;g&gt;.

<dl>
  <dt>New linedef flag "P" (pass through)
  <dd>Supported.

  <dt>New linedef types
  <dd>You can enter arbitrary linedef types ("enter number").

  <dt>New sector types
  <dd>You can enter arbitrary sector types ("enter number")

  <dt>New things flags "N" (not in deathmatch) and "C" (not in coop)
  <dd>Supported.

  <dt>New things types 5001 and 5002
  <dd>Supported.

  <dt>Special lumps <code>SWITCHES</code> and <code>ANIMATED</code>
  <dd>Unsupported.
</dl>

In progress...

		<h3><a name="toc-7-11">7.11. EDGE</a></h3>

<p>The default DDF definitions included in EDGE 1.24 have been
added to <code>doom.ygd</code> and <code>doom2.ygd</code>,
marked with "<code>[EDGE]</code>". When the pointer moves over a
sector that has extrafloors, the object info window shows the
information relevant to those. To see the sprite for the night
vision goggles (thing #7000), you must load
<code>edge.wad</code>.

<p>As of 1.5.0, the support for DDF is static&nbsp;: custom DDF
files or DDF lumps are ignored. In other words, you are limited
to the default DDF definitions.

		<h3><a name="toc-7-12">7.12. MBF</a></h3>

<p>Mostly supported, I think. Thing 888 (dog), thing flag 80h
(friendly), linedef types 271 and 272 are all in. You can't see
the sprite for the dog because it's embedded in the MBF
executable.

		<h3><a name="toc-7-13">7.13. Other derivatives</a></h3>

<p>Not supported so far.</p>

<hr>AYM 2008-01-17
</body>
</html>
